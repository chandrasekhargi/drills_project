
import React,{useEffect,useState} from 'react'; import axios from 'axios'; import { useParams } from 'react-router-dom'; export default function Drill(){ const {id}=useParams(); const [drill,setDrill]=useState(null); const [answers,setAnswers]=useState([]); useEffect(()=>{ axios.get((process.env.REACT_APP_API_URL||'http://localhost:5000')+'/api/drills').then(r=>{ const found=r.data.find(x=>x._id===id); setDrill(found); setAnswers(found?Array(found.questions.length).fill(''):[]); }).catch(()=>{}); },[id]); if(!drill) return <div>Loading...</div>; const submit=async()=>{ const score=answers.reduce((s,a)=>s+(a.trim()?1:0),0); await axios.post((process.env.REACT_APP_API_URL||'http://localhost:5000')+'/api/attempts',{user:{id:'guest',displayName:'Guest'},drillId:drill._id,answers,score}); alert('Submitted. Score: '+score); }; return (<div><h2>{drill.title}</h2>{drill.questions.map((q,i)=>(<div key={i}><p>{i+1}. {q}</p><input value={answers[i]||''} onChange={e=>{const c=[...answers]; c[i]=e.target.value; setAnswers(c);}}/></div>))}<button onClick={submit}>Submit</button></div>); }
